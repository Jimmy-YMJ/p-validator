!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.PValidator=e()}}(function(){return function e(t,i,r){function n(o,u){if(!i[o]){if(!t[o]){var f="function"==typeof require&&require;if(!u&&f)return f(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[o]={exports:{}};t[o][0].call(c.exports,function(e){var i=t[o][1][e];return n(i?i:e)},c,c.exports,e,t,i,r)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(e,t,i){"use strict";function r(e,t,i){this._setFields(e),this.rules=t,this.customErrors=i||{},this.results=null,this.validatedValues={}}r.prototype={_initResults:function(){this.results=null,this.validatedValues={}},_createFieldChecker:function(e,t,i,r){return new Promise(function(e,r){i(t,e,r)}).then(function(){return t},function(t){var i=this.customErrors[e];return i=i?i instanceof Array?i[r]:i:"string"==typeof t?t.replace(":field",e):t,this.results=this.results||{},this.results[e]=i,Promise.reject(i)}.bind(this))},_checkField:function(e,t,i,n){if(t="function"==typeof t?t():t,n!==!0&&(this.validatedValues[e]=t),i=i instanceof Array?i:[i],"string"==typeof i[0]&&r._canBeEmptyRules.indexOf(i[0])>-1&&r._isEmpty(t))return Promise.resolve(t);var s=Promise.resolve();return i.forEach(function(i,r){"function"==typeof i&&(s=s.then(function(){return this._createFieldChecker(e,t,i,r)}.bind(this)))}.bind(this)),s},_setFields:function(e){e&&(this.fields=e,this.fieldsKey=r.getObjectKeys(e))},validateField:function(e){if(!this.fields[e])throw new Error("has no field named "+e);return this._checkField(e,this.fields[e],this.rules[e],!0)},validate:function(e){e=e||{},e.fields&&this._setFields(e.fields),this._initResults();var t=Promise.resolve();this.fieldsKey.forEach(function(e){var i=this._checkField(e,this.fields[e],this.rules[e]);t=t.then(function(){return i},function(){return i})}.bind(this));var i=function(t,i){this.results?i(e.objectErrors?this.results:r.resultsToArray(this.results)):t(this.validatedValues)}.bind(this);return new Promise(function(e,r){t.then(function(){i(e,r)},function(){i(e,r)})})}},r._canBeEmptyRules=["canBeEmpty","empty"],r._isEmpty=function(e){return void 0===e||null===e||"string"==typeof e&&0===e.trim().length},r.resultsToArray=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},r.getObjectKeys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t},t.exports=r},{}],2:[function(e,t,i){"use strict";t.exports=e("./lib/PromiseValidator")},{"./lib/PromiseValidator":1}]},{},[2])(2)});